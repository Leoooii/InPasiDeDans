<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dropdown Auto Close</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100">
    <div class="py-20">
        <div class="container mx-auto px-4">
            <!-- Navbar cu dropdown-uri -->
            <nav class="bg-white shadow-lg rounded-lg p-4">
                <div class="flex justify-center space-x-4">
                    <!-- Dropdown 1: Cursuri adulți -->
                    <div class="relative">
                        <button 
                            id="dropdown1-trigger"
                            class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"
                        >
                            Cursuri dans adulți ▼
                        </button>
                        <div 
                            id="dropdown1" 
                            class="hidden absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-10"
                        >
                            <div class="p-4">
                                <a href="/dansuri-latino" class="block py-2 hover:bg-gray-100 rounded px-2">Dansuri Latino</a>
                                <a href="/dansuri-de-societate" class="block py-2 hover:bg-gray-100 rounded px-2">Dansuri de Societate</a>
                                <a href="/dansuri-populare" class="block py-2 hover:bg-gray-100 rounded px-2">Dansuri Populare</a>
                            </div>
                        </div>
                    </div>

                    <!-- Dropdown 2: Despre noi -->
                    <div class="relative">
                        <button 
                            id="dropdown2-trigger"
                            class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"
                        >
                            Despre noi ▼
                        </button>
                        <div 
                            id="dropdown2" 
                            class="hidden absolute top-full left-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-10"
                        >
                            <div class="p-4">
                                <a href="/despre-noi" class="block py-2 hover:bg-gray-100 rounded px-2">Despre noi</a>
                                <a href="/instructori" class="block py-2 hover:bg-gray-100 rounded px-2">Instructori</a>
                                <a href="/contact" class="block py-2 hover:bg-gray-100 rounded px-2">Contact</a>
                            </div>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Status indicator -->
            <div class="mt-8 text-center">
                <div id="status" class="text-lg font-semibold text-gray-700">
                    Dropdown-urile se închid automat după 3 secunde sau când navighezi
                </div>
                <div id="timer" class="text-sm text-gray-500 mt-2">
                    Timer: <span id="countdown">0</span>s
                </div>
            </div>
        </div>
    </div>

    <script>
        console.log('=== TEST DROPDOWN AUTO CLOSE ===');
        
        let activeDropdown = null;
        let timer = null;
        let countdown = 0;
        
        const dropdowns = {
            'dropdown1-trigger': 'dropdown1',
            'dropdown2-trigger': 'dropdown2'
        };
        
        const statusEl = document.getElementById('status');
        const countdownEl = document.getElementById('countdown');
        
        // Funcție pentru a deschide dropdown
        const openDropdown = (dropdownId) => {
            // Închide dropdown-ul activ
            if (activeDropdown) {
                document.getElementById(activeDropdown).classList.add('hidden');
            }
            
            // Deschide noul dropdown
            document.getElementById(dropdownId).classList.remove('hidden');
            activeDropdown = dropdownId;
            
            // Resetează timer-ul
            clearTimeout(timer);
            countdown = 3;
            updateCountdown();
            
            // Setează timer pentru auto-close
            timer = setTimeout(() => {
                closeDropdown();
            }, 3000);
            
            statusEl.textContent = `Dropdown "${dropdownId}" deschis - se închide în 3 secunde`;
        };
        
        // Funcție pentru a închide dropdown
        const closeDropdown = () => {
            if (activeDropdown) {
                document.getElementById(activeDropdown).classList.add('hidden');
                activeDropdown = null;
                clearTimeout(timer);
                countdown = 0;
                updateCountdown();
                statusEl.textContent = 'Toate dropdown-urile sunt închise';
            }
        };
        
        // Funcție pentru countdown
        const updateCountdown = () => {
            countdownEl.textContent = countdown;
            if (countdown > 0) {
                countdown--;
                setTimeout(updateCountdown, 1000);
            }
        };
        
        // Event listeners pentru trigger-uri
        Object.keys(dropdowns).forEach(triggerId => {
            document.getElementById(triggerId).addEventListener('click', (e) => {
                e.preventDefault();
                const dropdownId = dropdowns[triggerId];
                openDropdown(dropdownId);
            });
        });
        
        // Event listeners pentru link-uri (închid dropdown când navighezi)
        document.querySelectorAll('a[href]').forEach(link => {
            link.addEventListener('click', () => {
                console.log('Link clicked - closing dropdown');
                closeDropdown();
            });
        });
        
        // Închide dropdown când faci click în afara lui
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.relative')) {
                closeDropdown();
            }
        });
        
        console.log('✅ Auto-close implementat: 3 secunde');
        console.log('✅ Închidere la navigare pe link');
        console.log('✅ Închidere la click în afara dropdown-ului');
    </script>
</body>
</html>
